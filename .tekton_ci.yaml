image: adoptopenjdk/openjdk11-openj9:jre-11.0.7_10_openj9-0.20.0-alpine

stages:
  - image

build-image:
  stage: image
  rules:
    - if: vars.CI_COMMIT_BRANCH != 'master'
      when: never
  tekton:
    taskRef: buildah
    params:
     - name: IMAGE
       expr: "'quay.io/bigkevmcd/java-demo:master-' + vars.CI_COMMIT_SHORT_SHA"
